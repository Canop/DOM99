"use strict";var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},dom99=function(){var e={},t={},n={},r={},i={},o=[],a=e,c=t,u=n,f=void 0,d="MISS",l=function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e&&!(e instanceof String)},v=function(e){return e.map(function(e){return e})},s=function e(t,n){Object.keys(n).forEach(function(r){l(n[r])?(t.hasOwnProperty(r)||(Array.isArray(n[r])?t[r]=[]:t[r]={}),e(t[r],n[r])):t[r]=n[r]})},p=function(e){return function(t){return e.hasOwnProperty(t)?e[t]:e[d]}},m=p({INPUT:"value",TEXTAREA:"value",PROGRESS:"value",SELECT:"value",IMG:"src",SOURCE:"src",AUDIO:"src",VIDEO:"src",TRACK:"src",SCRIPT:"src",OPTION:"value",LINK:"href",DETAILS:"open",MISS:"textContent"}),y=p({checkbox:"checked",radio:"checked",MISS:"value"}),h=p({checkbox:"change",radio:"change",range:"change",file:"change",MISS:"input"}),E=p({SELECT:"change",MISS:"input"}),b={attributeValueDoneSign:"â˜€",tokenSeparator:"-",listSeparator:",",directives:{directiveFunction:"data-fx",directiveVariable:"data-vr",directiveElement:"data-el",directiveList:"data-list",directiveIn:"data-in",directiveTemplate:"data-template"},variablePropertyFromElement:function(e){var t=e.tagName||e;return"INPUT"===t?y(e.type||"text"):m(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?h(e.type):E(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]},g=function(e){var t=document.createElement(e.tagName);return Object.keys(e).forEach(function(n){"tagName"!==n&&t.setAttribute(n,e[n])}),t},S=function e(t,n){if(n(t),"TEMPLATE"!==t.tagName)for(t=t.firstElementChild;t;)e(t,n),t=t.nextElementSibling},T=function(e){return e.getAttribute("is")||e.tagName.toLowerCase()},P=function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];e.addEventListener(t,n,r)},A=function(e,t){t.split(b.listSeparator).forEach(function(t){var n=t.split(b.tokenSeparator);if(1===n.length){var r=n[0],i=b.eventNameFromElement(e);O(e,i,r)}else{var o=_slicedToArray(n,2),a=o[0],c=o[1];O(e,a,c)}})},O=function(e,t,n){r[n]&&P(e,t,r[n])},I=function(e,t){var n=t.split(b.tokenSeparator),r=_slicedToArray(n,2),i=r[0],o=r[1],c=void 0,u=void 0;i&&(a.hasOwnProperty(i)&&(u=a[i]),e.DVRPL=b.variablePropertyFromElement(o.toUpperCase()),Object.defineProperty(a,i,{get:function(){return c},set:function(t){var n=document.createDocumentFragment();c=t,e.innerHTML="",c.forEach(function(t){var r=document.createElement(o);l(t)?Object.keys(t).forEach(function(e){r[e]=t[e]}):r[e.DVRPL]=t,n.appendChild(r)}),e.appendChild(n)},enumerable:!0,configurable:!1}),void 0!==u&&(a[i]=u))},N=function(e,t){t&&(e.DVRP=b.variablePropertyFromElement(e),c.hasOwnProperty(t)?(c[t].push(e),e[e.DVRP]=a[t]):!function(){var n=void 0;a.hasOwnProperty(t)&&(n=a[t]);var r=c,i="";c[t]=[e],Object.defineProperty(a,t,{get:function(){return i},set:function(e){i!==e&&(i=e,r[t].forEach(function(e){e[e.DVRP]=i}))},enumerable:!0,configurable:!1}),void 0!==n&&(a[t]=n)}(),b.tagNamesForUserInput.includes(e.tagName)&&!function(){var n=a,r=function(e){n[t]=e.target[e.target.DVRP]};P(e,b.eventNameFromElement(e),r)}())},C=function(e,t){var n=t;n&&(u[n]=e)},w=function(e,t){t&&(i[t]=e)},L=function(){return"content"in document.createElement("template")?function(e){return document.importNode(e.content,!0)}:function(e){var t=document.createElement("div");return t.innerHTML=e.innerHTML,t}}(),D=function(e){o.push(e),u.hasOwnProperty(e)||(u[e]={}),a.hasOwnProperty(e)||(a[e]={}),c.hasOwnProperty(e)||(c[e]={}),u=u[e],a=a[e],c=c[e]},R=function(e,t){var n=e;return t.forEach(function(e){n=n[e]}),n},x=function(){o.pop(),u=R(n,o),a=R(e,o),c=R(t,o)},V=function(){var r=function(e,t){var n=e,r=t.pop();t.forEach(function(e){n=n[e]}),delete n[r]};return function(i){Array.isArray(i)||(i=[i]),r(n,v(i)),r(e,v(i)),r(t,v(i))}}(),k=function(e,t){if(t){var n=i[T(e)];D(t);var r=j(L(n));e.CONTEXT={el:u,vr:a,baseEl:e},x(),e.appendChild(r)}},F=function(e){if(e.hasAttribute&&(f.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var o=e.getAttribute(r);o[0]!==b.attributeValueDoneSign&&(i(e,o),e.setAttribute(r,b.attributeValueDoneSign+o))}}),!e.hasAttribute(b.directives.directiveIn))){var t=T(e);i.hasOwnProperty(t)&&e.appendChild(L(i[t]))}},M=function e(t){var n=t.parentNode;if(n)return n.hasOwnProperty("CONTEXT")?n.CONTEXT:e(n);throw new Error("element has no parent context")},j=function(){var e=arguments.length<=0||void 0===arguments[0]?document.body:arguments[0];return f||(f=[[b.directives.directiveElement,C],[b.directives.directiveVariable,N],[b.directives.directiveFunction,A],[b.directives.directiveList,I],[b.directives.directiveIn,k],[b.directives.directiveTemplate,w]]),S(e,F),e},U={el:n,fx:r,createElement2:g,forgetKey:V,linkJsAndDom:j,options:b,getParentContext:M};return Object.defineProperty(U,"vr",{get:function(){return e},set:function(t){return t&&l(t)?(s(e,t),t):void 0},enumerable:!0,configurable:!1}),Object.freeze(U)}();"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=dom99);