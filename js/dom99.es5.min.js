"use strict";var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},D=function(){var e={},t={},n={},r={},i={},a=[],o=void 0,c="MISS",u="CONTEXT",l="DVRPL",f="DVRP",d="ELEMENT_LIST_ITEM",v="CUSTOM",s=">",m="text",p=Object.prototype.hasOwnProperty,E=function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e},h=function(e){return e.slice()},y=function(e){return function(t){return p.call(e,t)?e[t]:e[c]}},T=y({INPUT:"value",TEXTAREA:"value",PROGRESS:"value",SELECT:"value",IMG:"src",SOURCE:"src",AUDIO:"src",VIDEO:"src",TRACK:"src",SCRIPT:"src",OPTION:"value",LINK:"href",DETAILS:"open",MISS:"textContent"}),b=y({checkbox:"checked",radio:"checked",MISS:"value"}),g=y({checkbox:"change",radio:"change",range:"change",file:"change",MISS:"input"}),S=y({SELECT:"change",INPUT:"input",BUTTON:"click",MISS:"click"}),A={attributeValueDoneSign:"*",tokenSeparator:"-",listSeparator:" ",directives:{directiveFunction:"data-function",directiveVariable:"data-variable",directiveElement:"data-elementement",directiveList:"data-list",directiveInside:"data-insideside",directiveTemplate:"data-template"},variablePropertyFromElement:function(e){var t=e.tagName||e;return"INPUT"===t?b(e.type||m):T(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?g(e.type):S(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]},I=function(e){var t=document.createElement(e.tagName);return Object.entries(e).forEach(function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];"tagName"!==r&&t.setAttribute(r,i)}),t},N=function e(t,n){if(n(t),"TEMPLATE"!==t.tagName)for(t=t.firstElementChild;t;)e(t,n),t=t.nextElementSibling},C=function(e){return e.getAttribute("is")||e.tagName.toLowerCase()},L=function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];e.addEventListener(t,n,r)},O=function(e){if(e.target){var t=e.target;if(p.call(t,u))return t[u]}return""},P=function(e){return e.join(s)},D=function(e,t){return 0===e.length?t:""+P(e)+s+t},F=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];Array.isArray(t)?!function(){var r=t;e.forEach(function(e){var t=document.createDocumentFragment();p.call(i,e[v])?!function(){var o=i[e[v]],c=h(a);a=n.split(s),r.forEach(function(e,n){var r=String(n);H(r);var i=w(o);B(i),X(),t.appendChild(i)}),a=c}():r.forEach(function(n){var r=document.createElement(e[d]);E(n)?Object.assign(n,r):r[e[l]]=n,t.appendChild(r)}),e.innerHTML="",e.appendChild(t)})}():e.forEach(function(e){e[e[f]]=t})},M=function n(r){var i=arguments.length<=1||void 0===arguments[1]?"":arguments[1];!E(r);var a=i;i&&(a=""+i+s),Object.entries(r).forEach(function(r){var i=_slicedToArray(r,2),o=i[0],c=i[1],u=""+a+o;if(E(c)){var l=""+u+s;Array.isArray(c)?(K(l),n(c,u),t[u]=c,p.call(e,u)&&F(e[u],c,u)):n(c,u)}else t[u]=c,p.call(e,u)&&F(e[u],c)})},U=function(e,t,n){!r[n],L(e,t,r[n]),e[u]=P(a)},k=function(e,t){t.split(A.listSeparator).forEach(function(t){var n=t.split(A.tokenSeparator),r=void 0,i=void 0;if(1===n.length)r=n[0],i=A.eventNameFromElement(e);else{var a=_slicedToArray(n,2);i=a[0],r=a[1]}U(e,i,r)})},x=function(n,r){var i=r.split(A.tokenSeparator),o=_slicedToArray(i,3),c=o[0],u=o[1],f=o[2],s="-";f?(s=u+"-"+f,n[v]=s):(n[l]=A.variablePropertyFromElement(u.toUpperCase()),n[d]=u);var m=D(a,c);p.call(e,m)?e[m].push(n):e[m]=[n],F(e[m],t[m],m)},j=function(n,r){n[f]=A.variablePropertyFromElement(n);var i=D(a,r);if(p.call(e,i)?e[i].push(n):e[i]=[n],n[n[f]]=t[i],A.tagNamesForUserInput.includes(n.tagName)){var o=function(n){var r=n.target[n.target[f]];t[i]=r,F(e[i],r)};L(n,A.eventNameFromElement(n),o)}},_=function(e,t){var r=t,i=D(a,r);n[i]=e},R=function(e,t){i[t]=e},V=function(e,t){var n=i[C(e)];H(t);var r=w(n);B(r),X(),e.appendChild(r)},w=function(){"Template  <template "+A.directives.directiveTemplate+'="d-name">\n    Template Content\n</template>';return"content"in document.createElement("template")?function(e){return document.importNode(e.content,!0)}:function(e){var t=document.createElement("div");return t.innerHTML=e.innerHTML,t}}(),H=function(e){a.push(e)},X=function(){a.pop()},G=function(e,t){Object.keys(e).forEach(function(n){n.startsWith(t)&&delete e[n]})},K=function(n){G(e,n),G(t,n)},z=function(e){if(e.hasAttribute&&(o.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var a=e.getAttribute(r);a[0]!==A.attributeValueDoneSign&&(i(e,a),e.setAttribute(r,A.attributeValueDoneSign+a))}}),!e.hasAttribute(A.directives.directiveInside)&&!e.hasAttribute(A.directives.directiveList))){var t=C(e);p.call(i,t)&&e.appendChild(w(i[t]))}},B=function(){var e=arguments.length<=0||void 0===arguments[0]?document.body:arguments[0];return o||(o=[[A.directives.directiveElement,_],[A.directives.directiveVariable,j],[A.directives.directiveFunction,k],[A.directives.directiveList,x],[A.directives.directiveInside,V],[A.directives.directiveTemplate,R]]),N(e,z),e},J=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2];Object.assign(r,e),M(t),B(n)};return Object.freeze({start:J,linkJsAndDom:B,elements:n,functions:r,variables:t,feed:M,createElement2:I,forgetContext:K,contextFromArray:P,contextFromEvent:O,options:A})}();"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=D);