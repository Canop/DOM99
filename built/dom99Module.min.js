const d=function(){"use strict";const a=`${"DOM99"}_C`,b=`${"DOM99"}_L`,c=`${"DOM99"}_E`,d=`${"DOM99"}_I`,e=`${"DOM99"}_X`,f=`${"DOM99"}_R`,g=`>`,h={},i={},j={},k={},l={},m={};let n,o,p,q,r,s=[];const t=Object.prototype.hasOwnProperty,u=function(a){const b=a.length,c=[];let d;for(d=0;d<b;d+=1)c.push(a[d]);return c},v=function(a){return`object`==typeof a&&null!==a},w=function(a){return a.slice()},x=function(a,b,c){t.call(a,b)?a[b].push(c):a[b]=[c]},y=function(a){return function(b){return t.call(a,b)?a[b]:a[`MISS`]}},z=y({[`INPUT`]:`value`,[`TEXTAREA`]:`value`,[`PROGRESS`]:`value`,[`SELECT`]:`value`,[`IMG`]:`src`,[`SOURCE`]:`src`,[`AUDIO`]:`src`,[`VIDEO`]:`src`,[`TRACK`]:`src`,[`SCRIPT`]:`src`,[`OPTION`]:`value`,[`LINK`]:`href`,[`DETAILS`]:`open`,MISS:`textContent`}),A=y({[`checkbox`]:`checked`,[`radio`]:`checked`,MISS:`value`}),B=y({[`checkbox`]:`change`,[`radio`]:`change`,[`range`]:`change`,[`file`]:`change`,MISS:`input`}),C=y({[`SELECT`]:`change`,[`TEXTAREA`]:`input`,[`BUTTON`]:`click`,MISS:`click`}),D={doneSymbol:`*`,tokenSeparator:`-`,listSeparator:` `,directives:{function:`data-function`,variable:`data-variable`,element:`data-element`,list:`data-list`,inside:`data-inside`,template:`data-template`},propertyFromElement:function(a){let b;return b=void 0===a.tagName?a:a.tagName,`INPUT`===b?A(a.type):z(b)},eventNameFromElement:function(a){const b=a.tagName;return`INPUT`===b?B(a.type):C(b)},tagNamesForUserInput:[`INPUT`,`TEXTAREA`,`SELECT`,`DETAILS`]};p=function(a,b){b(a);for(let c=a.firstChild;c;)c.nodeType===1?(p(c,b),c=c.nextElementSibling):c=c.nextSibling};const E=function(a){return a.getAttribute(`is`)||a.tagName.toLowerCase()},F=function(a,b,c,d=!1){a.addEventListener(b,c,d)},G=function(a){return a||console.error(`Template missing <template ${D.directives.template}="d-name">
                    Template Content
                </template>`),a.content||console.error(`template.content is undefined, this can happen if a template is inside another template. Use only top level templates`),document.importNode(a.content,!0)},H=function(b,c){if(b||c){let d;if(d=b&&b.target?b.target:c,t.call(d,a))return d[a];if(d.parentNode)return H(void 0,d.parentNode)}return console.warn(b,`has no context. contextFromEvent for top level elements is not needed.`),``},I=function(a){return a.join(g)},J=function(a){s.push(a)},K=function(){s.pop()},L=function(a,b){return 0===a.length?b:`${I(a)}${g}${b}`},M=function(a){return a?`${a}${g}`:a},N=function(a,b){Object.keys(a).forEach(function(c){c.startsWith(b)&&delete a[c]})},O=function(a){N(h,a),N(i,a),N(j,a),N(k,a)},P=function(a,b){a[a[c]]=b},Q=function(a,b){void 0===b||a.forEach(function(a){P(a,b)})},R=function(a){a.remove()},S=function(a,c,h){const j=document.createDocumentFragment();if(t.call(a,e)&&t.call(l,a[e])){const b=l[a[e]],d=w(s);s=c.split(g);const k=M(c),m=h.length;let n,p;if(!t.call(a,f))a[f]=[],n=0;else if(n=a[f].length,n>m){let b;for(b=m;b<n;b+=1)p=`${k}${b}`,a[f][b].forEach(R),O(p);a[f].length=m}h.forEach(function(c,d){if(p=`${k}${d}`,o(p,c),d>=n){const c=r(b,d+"");a[f].push(u(c.childNodes)),j.appendChild(c)}}),s=d}else a.innerHTML=``,h.forEach(function(c){const e=document.createElement(a[d]);v(c)?Object.assign(e,c):e[a[b]]=c,j.appendChild(e)});a.appendChild(j)},T=function(a,b,c){a.forEach(function(a){S(a,b,c)})};o=function(a,b){if(void 0===b&&(b=a,a=``),v(a)&&console.error(`Incorrect types passed to d.feed,
                d.feed(string, object) or d.feed(object)`),!v(b))j[a]=b,t.call(h,a)&&Q(h[a],b);else if(Array.isArray(b))j[a]=b,t.call(i,a)&&T(i[a],a,b);else{const c=M(a);Object.entries(b).forEach(function([a,b]){o(`${c}${a}`,b)})}};const U=function(b,c,d){m[d]||console.error(`Event listener ${d} not found.`),F(b,c,m[d]),b[a]=I(s)},V=[];let W=U;const X=function(a,b){b.split(D.listSeparator).forEach(function(b){const c=b.split(D.tokenSeparator);let d,e;1===c.length?(d=c[0],e=D.eventNameFromElement(a)):[e,d]=c,W(a,e,d)})},Y=function(a,c){const[f,g,h]=c.split(D.tokenSeparator);let k=`-`;f||console.error(a,`Use ${D.directives.list}="variableName-tagName" format!`),h?(k=`${g}-${h}`,a[e]=k):(a[b]=D.propertyFromElement(g.toUpperCase()),a[d]=g);const l=L(s,f);x(i,l,a),t.call(j,l)&&S(a,l,j[l])},Z=function(a,b){b||console.error(a,`Use ${D.directives.variable}="variableName" format!`),a[c]=D.propertyFromElement(a);const d=L(s,b);x(h,d,a);const e=j[d];if(void 0!==e&&P(a,e),D.tagNamesForUserInput.includes(a.tagName)){F(a,D.eventNameFromElement(a),function(b){const e=b.target[b.target[c]];j[d]=e,h[d].forEach(function(b){b!==a&&P(b,e)})})}},$=function(a,b){const c=b;c||console.error(a,`Use ${D.directives.element}="elementName" format!`);const d=L(s,c);k[d]=a},_=function(a,b){b||console.error(a,`Use ${D.directives.template}="d-name" format!`),l[b]=a};r=function(a,b){J(b);const c=G(a);return q(c),K(),c};const aa=function(a,b){b||console.error(a,`Use ${D.directives.inside}="insidewhat" format!`);const c=l[E(a)];if(c){const d=r(c,b);a.appendChild(d)}else a.setAttribute(D.directives.inside,D.doneSymbol+b),J(b),q(a),K()},ba=function(a){if(!a.hasAttribute)return;const b=Object.values(D.directives),c=Array.prototype.slice.call(a.attributes);if(c.forEach(function(a){if(a.nodeName.startsWith(`data`))if(b.includes(a.nodeName));else console.warn(`dom99 does not recognize ${a.nodeName}`)}),n.forEach(function([b,c]){if(a.hasAttribute(b)){const d=a.getAttribute(b);d[0]===D.doneSymbol||(c(a,d),a.setAttribute(b,D.doneSymbol+d))}}),!(a.hasAttribute(D.directives.inside)||a.hasAttribute(D.directives.list))){let b=E(a);t.call(l,b)&&a.appendChild(G(l[b]))}};q=function(a=document.body){return n||(n=[[D.directives.element,$],[D.directives.variable,Z],[D.directives.function,X],[D.directives.list,Y],[D.directives.inside,aa],[D.directives.template,_]]),p(a,ba),a};const ca=function(a={},b={},c=document.body,d=void 0){return Object.assign(m,a),o(b),q(c),d?d():void 0};return Object.freeze({start:ca,activate:q,elements:k,functions:m,variables:j,feed:o,createElement2:function(a){const b=document.createElement(a.tagName);return Object.entries(a).forEach(function([a,c]){`tagName`!==a&&b.setAttribute(a,c)}),b},forgetContext:O,deleteTemplate:function(a){t.call(l,a)||console.error(`<template ${D.directives.template}=${a}>
                </template> not found or already deleted and removed.`),l[a].remove(),delete l[a]},contextFromArray:I,contextFromEvent:H,getParentContext:function(a){const b=a.split(g);return b.pop(),b.join(g)},options:D,plugin:function(a){t.call(a,`directives`)&&t.call(a.directives,`function`)&&(V.push(a.directives.function),W=function(a,b,c){let d=!1;const e=function(){d=!0};V.forEach(function(d){d(a,b,c,m,e)});d||U(a,b,c)})}})}();export default d;