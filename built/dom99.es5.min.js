"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=undefined;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(f){i=!0,o=f}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){var e,t,n,r,i={},o={},a={},c={},f={},u={},d=[],l=void 0,s=void 0,v=void 0,p=void 0,y=void 0,m=Object.prototype.hasOwnProperty,h=function(e){var t=e.length,n=[],r=void 0;for(r=0;r<t;r+=1)n.push(e[r]);return n},_=function(e){return"object"==typeof e&&null!==e},E=function(e){return e.slice()},g=function(e,t,n){m.call(e,t)?e[t].push(n):e[t]=[n]},b=function(e){return function(t){return m.call(e,t)?e[t]:e.MISS}},O=b((e={},_defineProperty(e,"INPUT","value"),_defineProperty(e,"TEXTAREA","value"),_defineProperty(e,"PROGRESS","value"),_defineProperty(e,"SELECT","value"),_defineProperty(e,"IMG","src"),_defineProperty(e,"SOURCE","src"),_defineProperty(e,"AUDIO","src"),_defineProperty(e,"VIDEO","src"),_defineProperty(e,"TRACK","src"),_defineProperty(e,"SCRIPT","src"),_defineProperty(e,"OPTION","value"),_defineProperty(e,"LINK","href"),_defineProperty(e,"DETAILS","open"),_defineProperty(e,"MISS","textContent"),e)),P=b((t={},_defineProperty(t,"checkbox","checked"),_defineProperty(t,"radio","checked"),_defineProperty(t,"MISS","value"),t)),S=b((n={},_defineProperty(n,"checkbox","change"),_defineProperty(n,"radio","change"),_defineProperty(n,"range","change"),_defineProperty(n,"file","change"),_defineProperty(n,"MISS","input"),n)),A=b((r={},_defineProperty(r,"SELECT","change"),_defineProperty(r,"TEXTAREA","input"),_defineProperty(r,"BUTTON","click"),_defineProperty(r,"MISS","click"),r)),T={doneSymbol:"*",tokenSeparator:"-",listSeparator:" ",directives:{"function":"data-function",variable:"data-variable",element:"data-element",list:"data-list",inside:"data-inside",template:"data-template"},propertyFromElement:function(e){var t=void 0;return"INPUT"===(t=e.tagName!==undefined?e.tagName:e)?P(e.type):O(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?S(e.type):A(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]};v=function(e,t){if(t(e),e.tagName===undefined||"TEMPLATE"!==e.tagName)for(var n=e.firstChild;n;)1===n.nodeType?(v(n,t),n=n.nextElementSibling):n=n.nextSibling};var M=function(e){return e.getAttribute("is")||e.tagName.toLowerCase()},N=function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];e.addEventListener(t,n,r)},D=function(e){return document.importNode(e.content,!0)},I=function(e){return e.join(">")},C=function(e){d.push(e)},R=function(){d.pop()},j=function(e,t){return 0===e.length?t:I(e)+">"+t},L=function(e){return e?e+">":e},F=function(e,t){Object.keys(e).forEach(function(n){n.startsWith(t)&&delete e[n]})},k=function(e){F(i,e),F(o,e),F(a,e),F(c,e)},x=function(e,t){e[e.DOM99_E]=t},U=function(e,t){t!==undefined&&e.forEach(function(e){x(e,t)})},X=function(e){e.remove()},w=function(e,t,n){var r=document.createDocumentFragment();if(m.call(e,"DOM99_X")&&m.call(f,e.DOM99_X)){var i=f[e.DOM99_X],o=E(d);d=t.split(">");var a=L(t),c=n.length,u=void 0,l=void 0;if(m.call(e,"DOM99_R")){if((u=e.DOM99_R.length)>c){var v=void 0;for(v=c;v<u;v+=1)l=""+a+v,e.DOM99_R[v].forEach(X),k(l);e.DOM99_R.length=c}}else e.DOM99_R=[],u=0;n.forEach(function(t,n){if(l=""+a+n,s(t,l),n>=u){var o=y(i,String(n));e.DOM99_R.push(h(o.childNodes)),r.appendChild(o)}}),d=o}else e.innerHTML="",n.forEach(function(t){var n=document.createElement(e.DOM99_I);_(t)?Object.assign(n,t):n[e.DOM99_L]=t,r.appendChild(n)});e.appendChild(r)},G=function(e,t,n){e.forEach(function(e){w(e,t,n)})};s=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(_(e))if(Array.isArray(e))a[t]=e,m.call(o,t)&&G(o[t],t,e);else{var n=L(t);Object.entries(e).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],i=t[1];s(i,""+n+r)})}else a[t]=e,m.call(i,t)&&U(i[t],e)};var K=function(e,t,n){N(e,t,u[n]),e.DOM99_C=I(d)},W=[],z=K,B=function(e,t){t.split(T.listSeparator).forEach(function(t){var n=t.split(T.tokenSeparator),r=void 0,i=void 0;if(1===n.length)r=n[0],i=T.eventNameFromElement(e);else{var o=_slicedToArray(n,2);i=o[0],r=o[1]}z(e,i,r)})},H=function(e,t){var n=t.split(T.tokenSeparator),r=_slicedToArray(n,3),i=r[0],c=r[1],f=r[2],u="-";f?(u=c+"-"+f,e.DOM99_X=u):(e.DOM99_L=T.propertyFromElement(c.toUpperCase()),e.DOM99_I=c);var l=j(d,i);g(o,l,e),m.call(a,l)&&w(e,l,a[l])},V=function(e,t){e.DOM99_E=T.propertyFromElement(e);var n=j(d,t);g(i,n,e);var r=a[n];if(r!==undefined&&x(e,r),T.tagNamesForUserInput.includes(e.tagName)){N(e,T.eventNameFromElement(e),function(t){var r=t.target[t.target.DOM99_E];a[n]=r,i[n].forEach(function(t){t!==e&&x(t,r)})})}},q=function(e,t){var n=t,r=j(d,n);c[r]=e},J=function(e,t){f[t]=e};y=function(e,t){C(t);var n=D(e);return p(n),R(),n};var Q=function(e,t){var n=f[M(e)];if(n){var r=y(n,t);e.appendChild(r)}else e.setAttribute(T.directives.inside,T.doneSymbol+t),C(t),p(e),R()},Y=function(e){if(e.hasAttribute){var t=Object.values(T.directives);if(Array.prototype.slice.call(e.attributes).forEach(function(e){e.nodeName.startsWith("data")&&t.includes(e.nodeName)}),l.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var o=e.getAttribute(r);o[0]!==T.doneSymbol&&(i(e,o),e.setAttribute(r,T.doneSymbol+o))}}),!e.hasAttribute(T.directives.inside)&&!e.hasAttribute(T.directives.list)){var n=M(e);m.call(f,n)&&e.appendChild(D(f[n]))}}};p=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document.body;return l||(l=[[T.directives.element,q],[T.directives.variable,V],[T.directives["function"],B],[T.directives.list,H],[T.directives.inside,Q],[T.directives.template,J]]),v(e,Y),e};return Object.freeze({start:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:document.body,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(Object.assign(u,e),s(t),p(n),r)return r()},activate:p,elements:c,functions:u,variables:a,feed:s,createElement2:function(e){var t=document.createElement(e.tagName);return Object.entries(e).forEach(function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];"tagName"!==r&&t.setAttribute(r,i)}),t},forgetContext:k,deleteTemplate:function(e){m.call(f,e),f[e].remove(),delete f[e]},contextFromArray:I,contextFromEvent:function Z(e,t){if(e||t){var n=void 0;if(n=e&&e.target?e.target:t,m.call(n,"DOM99_C"))return n.DOM99_C;if(n.parentNode)return Z(undefined,n.parentNode)}return""},getParentContext:function(e){var t=e.split(">");return t.pop(),t.join(">")},options:T,plugin:function(e){m.call(e,"directives")&&m.call(e.directives,"function")&&(W.push(e.directives["function"]),z=function(e,t,n){var r=!1,i=function(){r=!0};W.forEach(function(r){r(e,t,n,u,i)}),r||K(e,t,n)})}})}();