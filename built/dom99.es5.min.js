"use strict";var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d=function(){var e={},t={},n={},r={},i={},a={},o=[],c=void 0,u="MISS",l="DOM99_CTX",f="DOM99_LIP",v="DOM99_EP",d="DOM99_ELEMENT_LIST_ITEM",s="DOM99_CE",m="DOM99_LIST_CHILDREN",p=">",h=Object.prototype.hasOwnProperty,E=function(e){var t=[],n=void 0,r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)n=o.value,t.push(n)}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return t},y=function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e},g=function(e){return e.slice()},b=function(e,t){return Array.isArray(e)?(e.push(t),e):[t]},T=function(e){return function(t){return h.call(e,t)?e[t]:e[u]}},S=T({INPUT:"value",TEXTAREA:"value",PROGRESS:"value",SELECT:"value",IMG:"src",SOURCE:"src",AUDIO:"src",VIDEO:"src",TRACK:"src",SCRIPT:"src",OPTION:"value",LINK:"href",DETAILS:"open",MISS:"textContent"}),A=T({checkbox:"checked",radio:"checked",MISS:"value"}),I=T({checkbox:"change",radio:"change",range:"change",file:"change",MISS:"input"}),N=T({SELECT:"change",INPUT:"input",BUTTON:"click",MISS:"click"}),O={attributeValueDoneSign:"*",tokenSeparator:"-",listSeparator:" ",directives:{directiveFunction:"data-function",directiveVariable:"data-variable",directiveElement:"data-element",directiveList:"data-list",directiveInside:"data-inside",directiveTemplate:"data-template"},variablePropertyFromElement:function(e){var t=void 0;return t=void 0!==e.tagName?e.tagName:e,"INPUT"===t?A(e.type):S(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?I(e.type):N(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]},C=function(e){var t=document.createElement(e.tagName);return Object.entries(e).forEach(function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];"tagName"!==r&&t.setAttribute(r,i)}),t},L=function e(t,n){if(n(t),"TEMPLATE"!==t.tagName)for(var r=t.firstElementChild;r;)e(r,n),r=r.nextElementSibling},M=function(e){return e.getAttribute("is")||e.tagName.toLowerCase()},_=function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];e.addEventListener(t,n,r)},D=function(){"Template  <template "+O.directives.directiveTemplate+'="d-name">\n    Template Content\n</template>';return"content"in document.createElement("template")?function(e){return document.importNode(e.content,!0)}:function(e){var t=document.createElement("div");return t.innerHTML=e.innerHTML,t}}(),P=function(e){if(e.target){var t=e.target;if(h.call(t,l))return t[l]}return""},F=function(e){return e.join(p)},j=function(e){var t=e.split(p);t.splice(-1);return t.join(p)},k=function(e,t){return 0===e.length?t:""+F(e)+p+t},U=function(e){return e?""+e+p:e},x=function(e,t){e[e[v]]=t},R=function(e,t){void 0!==t&&e.forEach(function(e){x(e,t)})},w=function(e,t,n){var r=document.createDocumentFragment();h.call(i,e[s])?!function(){var a=i[e[s]],c=g(o);o=t.split(p);var u=U(t),l=n.length,f=void 0;if(h.call(e,m)){if(f=e[m].length,f>l){for(var v=l;f>v;v+=1){var d=""+u+v;e[m][v].forEach(function(e){e.remove()}),$(d)}e[m].length=l}}else e[m]=[],f=0;n.forEach(function(t,n){var i=""+u+n;if(H(t,i),n>=f){var o=W(a,String(n));e[m].push(E(o.childNodes)),r.appendChild(o)}}),o=c}():(e.innerHTML="",n.forEach(function(t){var n=document.createElement(e[d]);y(t)?Object.assign(n,t):n[e[f]]=t,r.appendChild(n)})),e.appendChild(r)},V=function(e,t,n){e.forEach(function(e){w(e,t,n)})},H=function r(i){var a=arguments.length<=1||void 0===arguments[1]?"":arguments[1];y(i)?Array.isArray(i)?(n[a]=i,h.call(t,a)&&V(t[a],a,i)):!function(){var e=U(a);Object.entries(i).forEach(function(t){var n=_slicedToArray(t,2),i=n[0],a=n[1],o=""+e+i;r(a,o)})}():(n[a]=i,h.call(e,a)&&R(e[a],i))},X=function(e,t,n){!a[n],_(e,t,a[n]),e[l]=F(o)},G=function(e,t){t.split(O.listSeparator).forEach(function(t){var n=t.split(O.tokenSeparator),r=void 0,i=void 0;if(1===n.length)r=n[0],i=O.eventNameFromElement(e);else{var a=_slicedToArray(n,2);i=a[0],r=a[1]}X(e,i,r)})},K=function(e,r){var i=r.split(O.tokenSeparator),a=_slicedToArray(i,3),c=a[0],u=a[1],l=a[2],v="-";l?(v=u+"-"+l,e[s]=v):(e[f]=O.variablePropertyFromElement(u.toUpperCase()),e[d]=u);var m=k(o,c);t[m]=b(t[m],e),h.call(n,m)&&w(e,m,n[m])},z=function(t,r){t[v]=O.variablePropertyFromElement(t);var i=k(o,r);e[i]=b(e[i],t);var a=n[i];if(void 0!==a&&x(t,a),O.tagNamesForUserInput.includes(t.tagName)){var c=function(r){var a=r.target[r.target[v]];n[i]=a,e[i].forEach(function(e){e!==t&&x(e,a)})};_(t,O.eventNameFromElement(t),c)}},B=function(e,t){var n=t,i=k(o,n);r[i]=e},J=function(e,t){i[t]=e},W=function(e,t){Q(t);var n=D(e);return te(n),Y(),n},q=function(e,t){var n=i[M(e)],r=W(n,t);e.appendChild(r)},Q=function(e){o.push(e)},Y=function(){o.pop()},Z=function(e,t){Object.keys(e).forEach(function(n){n.startsWith(t)&&delete e[n]})},$=function(r){Z(e,r),Z(t,r),Z(n,r)},ee=function(e){if(e.hasAttribute&&(c.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var a=e.getAttribute(r);a[0]!==O.attributeValueDoneSign&&(i(e,a),e.setAttribute(r,O.attributeValueDoneSign+a))}}),!e.hasAttribute(O.directives.directiveInside)&&!e.hasAttribute(O.directives.directiveList))){var t=M(e);h.call(i,t)&&e.appendChild(D(i[t]))}},te=function(){var e=arguments.length<=0||void 0===arguments[0]?document.body:arguments[0];return c||(c=[[O.directives.directiveElement,B],[O.directives.directiveVariable,z],[O.directives.directiveFunction,G],[O.directives.directiveList,K],[O.directives.directiveInside,q],[O.directives.directiveTemplate,J]]),L(e,ee),e},ne=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2];Object.assign(a,e),H(t),te(n)};return Object.freeze({start:ne,linkJsAndDom:te,elements:r,functions:a,variables:n,feed:H,createElement2:C,forgetContext:$,contextFromArray:F,contextFromEvent:P,getParentContext:j,options:O})}();