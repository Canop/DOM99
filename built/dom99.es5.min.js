"use strict";function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=undefined;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){var e={},t={},n={},r={},i={},o={},a=[],c=void 0,u=void 0,l=void 0,f=void 0,d=void 0,s=Object.prototype.hasOwnProperty,v=function(e){var t=e.length,n=[],r=void 0,i=void 0;for(r=0;r<t;r+=1)i=e[r],n.push(i);return n},p=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e},m=function(e){return e.slice()},h=function(e,t,n){s.call(e,t)?e[t].push(n):e[t]=[n]},y=function(e){return function(t){return s.call(e,t)?e[t]:e.MISS}},E=y({INPUT:"value",TEXTAREA:"value",PROGRESS:"value",SELECT:"value",IMG:"src",SOURCE:"src",AUDIO:"src",VIDEO:"src",TRACK:"src",SCRIPT:"src",OPTION:"value",LINK:"href",DETAILS:"open",MISS:"textContent"}),b=y({checkbox:"checked",radio:"checked",MISS:"value"}),g=y({checkbox:"change",radio:"change",range:"change",file:"change",MISS:"input"}),O=y({SELECT:"change",INPUT:"input",BUTTON:"click",MISS:"click"}),S={doneSymbol:"*",tokenSeparator:"-",listSeparator:" ",directives:{"function":"data-function",variable:"data-variable",element:"data-element",list:"data-list",inside:"data-inside",template:"data-template"},propertyFromElement:function(e){var t=void 0;return"INPUT"===(t=e.tagName!==undefined?e.tagName:e)?b(e.type):E(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?g(e.type):O(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]};l=function(e,t){if(t(e),e.tagName===undefined||"TEMPLATE"!==e.tagName)for(var n=e.firstChild;n;)1===n.nodeType?(l(n,t),n=n.nextElementSibling):n=n.nextSibling};var T=function(e){return e.getAttribute("is")||e.tagName.toLowerCase()},A=function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];e.addEventListener(t,n,r)},M=document.createElement("template").content!==undefined?function(e){return document.importNode(e.content,!0)}:function(e){var t=document.createElement("div");return t.innerHTML=e.innerHTML,t},_=function(e){return e.join(">")},N=function(e){a.push(e)},D=function(){a.pop()},I=function(e,t){return 0===e.length?t:_(e)+">"+t},C=function(e){return e?e+">":e},j=function(e,t){Object.keys(e).forEach(function(n){n.startsWith(t)&&delete e[n]})},L=function(i){j(e,i),j(t,i),j(n,i),j(r,i)},P=function(e,t){e[e.DOM99_E]=t},R=function(e,t){t!==undefined&&e.forEach(function(e){P(e,t)})},x=function(e){e.remove()},F=function(e,t,n){var r=document.createDocumentFragment();if(s.call(e,"DOM99_X")&&s.call(i,e.DOM99_X)){var o=i[e.DOM99_X],c=m(a);a=t.split(">");var l=C(t),f=n.length,h=void 0,y=void 0;if(s.call(e,"DOM99_R")){if((h=e.DOM99_R.length)>f){var E=void 0;for(E=f;E<h;E+=1)y=""+l+E,e.DOM99_R[E].forEach(x),L(y);e.DOM99_R.length=f}}else e.DOM99_R=[],h=0;n.forEach(function(t,n){if(y=""+l+n,u(t,y),n>=h){var i=d(o,String(n));e.DOM99_R.push(v(i.childNodes)),r.appendChild(i)}}),a=c}else e.innerHTML="",n.forEach(function(t){var n=document.createElement(e.DOM99_I);p(t)?Object.assign(n,t):n[e.DOM99_L]=t,r.appendChild(n)});e.appendChild(r)},U=function(e,t,n){e.forEach(function(e){F(e,t,n)})};u=function(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(p(r))if(Array.isArray(r))n[i]=r,s.call(t,i)&&U(t[i],i,r);else{var o=C(i);Object.entries(r).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];u(r,""+o+n)})}else n[i]=r,s.call(e,i)&&R(e[i],r)};var k=function(e,t,n){A(e,t,o[n]),e.DOM99_C=_(a)},w=function(e,t){t.split(S.listSeparator).forEach(function(t){var n=t.split(S.tokenSeparator),r=void 0,i=void 0;if(1===n.length)r=n[0],i=S.eventNameFromElement(e);else{var o=_slicedToArray(n,2);i=o[0],r=o[1]}k(e,i,r)})},X=function(e,r){var i=r.split(S.tokenSeparator),o=_slicedToArray(i,3),c=o[0],u=o[1],l=o[2],f="-";l?(f=u+"-"+l,e.DOM99_X=f):(e.DOM99_L=S.propertyFromElement(u.toUpperCase()),e.DOM99_I=u);var d=I(a,c);h(t,d,e),s.call(n,d)&&F(e,d,n[d])},W=function(t,r){t.DOM99_E=S.propertyFromElement(t);var i=I(a,r);h(e,i,t);var o=n[i];if(o!==undefined&&P(t,o),S.tagNamesForUserInput.includes(t.tagName)){A(t,S.eventNameFromElement(t),function(r){var o=r.target[r.target.DOM99_E];n[i]=o,e[i].forEach(function(e){e!==t&&P(e,o)})})}},H=function(e,t){var n=t,i=I(a,n);r[i]=e},G=function(e,t){i[t]=e};d=function(e,t){N(t);var n=M(e);return f(n),D(),n};var K=function(e,t){var n=i[T(e)];if(n){var r=d(n,t);e.appendChild(r)}else e.setAttribute(S.directives.inside,S.doneSymbol+t),N(t),f(e),D()},z=function(e){if(e.hasAttribute&&(Array.prototype.slice.call(e.attributes).forEach(function(e){e.nodeName.startsWith("data")&&s.call(S.directives,e.nodeName)}),c.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var o=e.getAttribute(r);o[0]!==S.doneSymbol&&(i(e,o),e.setAttribute(r,S.doneSymbol+o))}}),!e.hasAttribute(S.directives.inside)&&!e.hasAttribute(S.directives.list))){var t=T(e);s.call(i,t)&&e.appendChild(M(i[t]))}};f=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document.body;return c||(c=[[S.directives.element,H],[S.directives.variable,W],[S.directives["function"],w],[S.directives.list,X],[S.directives.inside,K],[S.directives.template,G]]),l(e,z),e};return Object.freeze({start:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:document.body,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(Object.assign(o,e),u(t),f(n),r)return r()},activate:f,elements:r,functions:o,variables:n,feed:u,createElement2:function(e){var t=e.tagName,n=_objectWithoutProperties(e,["tagName"]),r=document.createElement(t);return Object.entries(n).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];r.setAttribute(n,i)}),r},forgetContext:L,deleteTemplate:function(e){s.call(i,e),i[e].remove(),delete i[e]},contextFromArray:_,contextFromEvent:function(e){if(e.target){var t=e.target;if(s.call(t,"DOM99_C"))return t.DOM99_C}return""},getParentContext:function(e){var t=e.split(">");return t.pop(),t.join(">")},options:S})}();