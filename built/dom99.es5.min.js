"use strict";var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,a=undefined;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){var e={},t={},n={},r={},i={},a={},o=[],c=void 0,u=Object.prototype.hasOwnProperty,l=function(e){var t=e.length,n=[],r=void 0,i=void 0;for(r=0;r<t;r+=1)i=e[r],n.push(i);return n},f=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e},d=function(e){return e.slice()},v=function(e,t){return Array.isArray(e)?(e.push(t),e):[t]},s=function(e){return function(t){return u.call(e,t)?e[t]:e.MISS}},m=s({INPUT:"value",TEXTAREA:"value",PROGRESS:"value",SELECT:"value",IMG:"src",SOURCE:"src",AUDIO:"src",VIDEO:"src",TRACK:"src",SCRIPT:"src",OPTION:"value",LINK:"href",DETAILS:"open",MISS:"textContent"}),p=s({checkbox:"checked",radio:"checked",MISS:"value"}),h=s({checkbox:"change",radio:"change",range:"change",file:"change",MISS:"input"}),E=s({SELECT:"change",INPUT:"input",BUTTON:"click",MISS:"click"}),g={attributeValueDoneSign:"*",tokenSeparator:"-",listSeparator:" ",directives:{directiveFunction:"data-function",directiveVariable:"data-variable",directiveElement:"data-element",directiveList:"data-list",directiveInside:"data-inside",directiveTemplate:"data-template"},variablePropertyFromElement:function(e){var t=void 0;return"INPUT"===(t=e.tagName!==undefined?e.tagName:e)?p(e.type):m(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?h(e.type):E(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]},y=function z(e,t){if(t(e),"TEMPLATE"!==e.tagName)for(var n=e.firstElementChild;n;)z(n,t),n=n.nextElementSibling},b=function(e){return e.getAttribute("is")||e.tagName.toLowerCase()},S=function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];e.addEventListener(t,n,r)},O="content"in document.createElement("template")?function(e){return document.importNode(e.content,!0)}:function(e){var t=document.createElement("div");return t.innerHTML=e.innerHTML,t},T=function(e){return e.join(">")},A=function(e,t){return 0===e.length?t:T(e)+">"+t},D=function(e){return e?e+">":e},M=function(e,t){e[e.DOM99_E]=t},I=function(e,t){t!==undefined&&e.forEach(function(e){M(e,t)})},_=function(e,t,n){var r=document.createDocumentFragment();if(u.call(i,e.DOM99_X)){var a=i[e.DOM99_X],c=d(o);o=t.split(">");var v=D(t),s=n.length,m=void 0;if(u.call(e,"DOM99_R")){if((m=e.DOM99_R.length)>s){for(var p=s;p<m;p+=1){var h=""+v+p;e.DOM99_R[p].forEach(function(e){e.remove()}),H(h)}e.DOM99_R.length=s}}else e.DOM99_R=[],m=0;n.forEach(function(t,n){if(C(t,""+v+n),n>=m){var i=U(a,String(n));e.DOM99_R.push(l(i.childNodes)),r.appendChild(i)}}),o=c}else e.innerHTML="",n.forEach(function(t){var n=document.createElement(e.DOM99_I);f(t)?Object.assign(n,t):n[e.DOM99_L]=t,r.appendChild(n)});e.appendChild(r)},N=function(e,t,n){e.forEach(function(e){_(e,t,n)})},C=function B(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(f(r))if(Array.isArray(r))n[i]=r,u.call(t,i)&&N(t[i],i,r);else{var a=D(i);Object.entries(r).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];B(r,""+a+n)})}else n[i]=r,u.call(e,i)&&I(e[i],r)},L=function(e,t,n){S(e,t,a[n]),e.DOM99_C=T(o)},P=function(e,t){t.split(g.listSeparator).forEach(function(t){var n=t.split(g.tokenSeparator),r=void 0,i=void 0;if(1===n.length)r=n[0],i=g.eventNameFromElement(e);else{var a=_slicedToArray(n,2);i=a[0],r=a[1]}L(e,i,r)})},R=function(e,r){var i=r.split(g.tokenSeparator),a=_slicedToArray(i,3),c=a[0],l=a[1],f=a[2],d="-";f?(d=l+"-"+f,e.DOM99_X=d):(e.DOM99_L=g.variablePropertyFromElement(l.toUpperCase()),e.DOM99_I=l);var s=A(o,c);t[s]=v(t[s],e),u.call(n,s)&&_(e,s,n[s])},F=function(t,r){t.DOM99_E=g.variablePropertyFromElement(t);var i=A(o,r);e[i]=v(e[i],t);var a=n[i];if(a!==undefined&&M(t,a),g.tagNamesForUserInput.includes(t.tagName)){S(t,g.eventNameFromElement(t),function(r){var a=r.target[r.target.DOM99_E];n[i]=a,e[i].forEach(function(e){e!==t&&M(e,a)})})}},j=function(e,t){var n=t,i=A(o,n);r[i]=e},k=function(e,t){i[t]=e},U=function(e,t){V(t);var n=O(e);return K(n),w(),n},x=function(e,t){var n=i[b(e)];if(n){var r=U(n,t);e.appendChild(r)}else e.setAttribute(g.directives.directiveInside,g.attributeValueDoneSign+t),V(t),K(e),w()},V=function(e){o.push(e)},w=function(){o.pop()},X=function(e,t){Object.keys(e).forEach(function(n){n.startsWith(t)&&delete e[n]})},H=function(i){X(e,i),X(t,i),X(n,i),X(r,i)},G=function(e){if(e.hasAttribute&&(c.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var a=e.getAttribute(r);a[0]!==g.attributeValueDoneSign&&(i(e,a),e.setAttribute(r,g.attributeValueDoneSign+a))}}),!e.hasAttribute(g.directives.directiveInside)&&!e.hasAttribute(g.directives.directiveList))){var t=b(e);u.call(i,t)&&e.appendChild(O(i[t]))}},K=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document.body;return c||(c=[[g.directives.directiveElement,j],[g.directives.directiveVariable,F],[g.directives.directiveFunction,P],[g.directives.directiveList,R],[g.directives.directiveInside,x],[g.directives.directiveTemplate,k]]),y(e,G),e};return Object.freeze({start:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:document.body,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(Object.assign(a,e),C(t),K(n),r)return r()},linkJsAndDom:K,elements:r,functions:a,variables:n,feed:C,createElement2:function(e){var t=document.createElement(e.tagName);return Object.entries(e).forEach(function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];"tagName"!==r&&t.setAttribute(r,i)}),t},forgetContext:H,forgetRemoveTemplate:function(e){u.call(i,e),i[e].remove(),delete i[e]},contextFromArray:T,contextFromEvent:function(e){if(e.target){var t=e.target;if(u.call(t,"DOM99_C"))return t.DOM99_C}return""},getParentContext:function(e){var t=e.split(">");return t.pop(),t.join(">")},options:g})}();