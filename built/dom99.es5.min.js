"use strict";var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){var e="DOM99",t=e+"_C",n=e+"_L",r=e+"_E",i=e+"_I",o=e+"_X",a=e+"_R",c=">",u={},l={},f={},v={},d={},s={},m=[],p=void 0,h=Object.prototype.hasOwnProperty,g=function(e){var t=e.length,n=[],r=void 0,i=void 0;for(r=0;t>r;r+=1)i=e[r],n.push(i);return n},E=function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e},y=function(e){return e.slice()},b=function(e,t){return Array.isArray(e)?(e.push(t),e):[t]},S="MISS",T=function(e){return function(t){return h.call(e,t)?e[t]:e[S]}},A=T({INPUT:"value",TEXTAREA:"value",PROGRESS:"value",SELECT:"value",IMG:"src",SOURCE:"src",AUDIO:"src",VIDEO:"src",TRACK:"src",SCRIPT:"src",OPTION:"value",LINK:"href",DETAILS:"open",MISS:"textContent"}),I=T({checkbox:"checked",radio:"checked",MISS:"value"}),N=T({checkbox:"change",radio:"change",range:"change",file:"change",MISS:"input"}),C=T({SELECT:"change",INPUT:"input",BUTTON:"click",MISS:"click"}),O={attributeValueDoneSign:"*",tokenSeparator:"-",listSeparator:" ",directives:{directiveFunction:"data-function",directiveVariable:"data-variable",directiveElement:"data-element",directiveList:"data-list",directiveInside:"data-inside",directiveTemplate:"data-template"},variablePropertyFromElement:function(e){var t=void 0;return t=void 0!==e.tagName?e.tagName:e,"INPUT"===t?I(e.type):A(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?N(e.type):C(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]},L=function(e){var t=document.createElement(e.tagName);return Object.entries(e).forEach(function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];"tagName"!==r&&t.setAttribute(r,i)}),t},P=function e(t,n){if(n(t),"TEMPLATE"!==t.tagName)for(var r=t.firstElementChild;r;)e(r,n),r=r.nextElementSibling},_=function(e){return e.getAttribute("is")||e.tagName.toLowerCase()},F=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;e.addEventListener(t,n,r)},j=function(){return"content"in document.createElement("template")?function(e){return document.importNode(e.content,!0)}:function(e){var t=document.createElement("div");return t.innerHTML=e.innerHTML,t}}(),k=function(e){if(e.target){var n=e.target;if(h.call(n,t))return n[t]}return""},D=function(e){return e.join(c)},M=function(e){var t=e.split(c);return t.pop(),t.join(c)},U=function(e,t){return 0===e.length?t:""+D(e)+c+t},x=function(e){return e?""+e+c:e},R=function(e,t){e[e[r]]=t},V=function(e,t){void 0!==t&&e.forEach(function(e){R(e,t)})},w=function(e,t,r){var u=document.createDocumentFragment();if(h.call(d,e[o])){var l=d[e[o]],f=y(m);m=t.split(c);var v=x(t),s=r.length,p=void 0;if(h.call(e,a)){if(p=e[a].length,p>s){for(var b=s;p>b;b+=1){var S=""+v+b;e[a][b].forEach(function(e){e.remove()}),ee(S)}e[a].length=s}}else e[a]=[],p=0;r.forEach(function(t,n){var r=""+v+n;if(X(t,r),n>=p){var i=q(l,String(n));e[a].push(g(i.childNodes)),u.appendChild(i)}}),m=f}else e.innerHTML="",r.forEach(function(t){var r=document.createElement(e[i]);E(t)?Object.assign(r,t):r[e[n]]=t,u.appendChild(r)});e.appendChild(u)},H=function(e,t,n){e.forEach(function(e){w(e,t,n)})},X=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(E(t))if(Array.isArray(t))f[n]=t,h.call(l,n)&&H(l[n],n,t);else{var r=x(n);Object.entries(t).forEach(function(t){var n=_slicedToArray(t,2),i=n[0],o=n[1],a=""+r+i;e(o,a)})}else f[n]=t,h.call(u,n)&&V(u[n],t)},G=function(e,n,r){!s[r],F(e,n,s[r]),e[t]=D(m)},K=function(e,t){t.split(O.listSeparator).forEach(function(t){var n=t.split(O.tokenSeparator),r=void 0,i=void 0;if(1===n.length)r=n[0],i=O.eventNameFromElement(e);else{var o=_slicedToArray(n,2);i=o[0],r=o[1]}G(e,i,r)})},z=function(e,t){var r=t.split(O.tokenSeparator),a=_slicedToArray(r,3),c=a[0],u=a[1],v=a[2],d="-";v?(d=u+"-"+v,e[o]=d):(e[n]=O.variablePropertyFromElement(u.toUpperCase()),e[i]=u);var s=U(m,c);l[s]=b(l[s],e),h.call(f,s)&&w(e,s,f[s])},B=function(e,t){e[r]=O.variablePropertyFromElement(e);var n=U(m,t);u[n]=b(u[n],e);var i=f[n];if(void 0!==i&&R(e,i),O.tagNamesForUserInput.includes(e.tagName)){var o=function(t){var i=t.target[t.target[r]];f[n]=i,u[n].forEach(function(t){t!==e&&R(t,i)})};F(e,O.eventNameFromElement(e),o)}},J=function(e,t){var n=t,r=U(m,n);v[r]=e},W=function(e,t){d[t]=e},q=function(e,t){Y(t);var n=j(e);return re(n),Z(),n},Q=function(e,t){var n=d[_(e)];if(n){var r=q(n,t);e.appendChild(r)}else e.setAttribute(O.directives.directiveInside,O.attributeValueDoneSign+t),Y(t),re(e),Z()},Y=function(e){m.push(e)},Z=function(){m.pop()},$=function(e,t){Object.keys(e).forEach(function(n){n.startsWith(t)&&delete e[n]})},ee=function(e){$(u,e),$(l,e),$(f,e),$(v,e)},te=function(e){!h.call(d,e),d[e].remove(),delete d[e]},ne=function(e){if(e.hasAttribute&&(p.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var o=e.getAttribute(r);o[0]!==O.attributeValueDoneSign&&(i(e,o),e.setAttribute(r,O.attributeValueDoneSign+o))}}),!e.hasAttribute(O.directives.directiveInside)&&!e.hasAttribute(O.directives.directiveList))){var t=_(e);h.call(d,t)&&e.appendChild(j(d[t]))}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return p||(p=[[O.directives.directiveElement,J],[O.directives.directiveVariable,B],[O.directives.directiveFunction,K],[O.directives.directiveList,z],[O.directives.directiveInside,Q],[O.directives.directiveTemplate,W]]),P(e,ne),e},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object.assign(s,e),X(t),re(n),r?r():void 0};return Object.freeze({start:ie,linkJsAndDom:re,elements:v,functions:s,variables:f,feed:X,createElement2:L,forgetContext:ee,forgetRemoveTemplate:te,contextFromArray:D,contextFromEvent:k,getParentContext:M,options:O})}();