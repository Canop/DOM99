"use strict";var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=undefined;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){var t,n,r,i,o=function(e){return"object"==typeof e&&null!==e},a=Number.MAX_SAFE_INTEGER,c=Object.prototype.hasOwnProperty,u={},f={},d={},l={},p={},s={},v=[],y=[],h=!1,m=[],_=[],E=void 0,g=function(e,t,n){c.call(e,t)?e[t].push(n):e[t]=[n]},b=function(e){return function(t){return c.call(e,t)?e[t]:e.MISS}},P=b((_defineProperty(t={},"INPUT","value"),_defineProperty(t,"TEXTAREA","value"),_defineProperty(t,"PROGRESS","value"),_defineProperty(t,"SELECT","value"),_defineProperty(t,"IMG","src"),_defineProperty(t,"SOURCE","src"),_defineProperty(t,"AUDIO","src"),_defineProperty(t,"VIDEO","src"),_defineProperty(t,"TRACK","src"),_defineProperty(t,"SCRIPT","src"),_defineProperty(t,"OPTION","value"),_defineProperty(t,"LINK","href"),_defineProperty(t,"DETAILS","open"),_defineProperty(t,"MISS","textContent"),t)),S=b((_defineProperty(n={},"checkbox","checked"),_defineProperty(n,"radio","checked"),_defineProperty(n,"MISS","value"),n)),A=b((_defineProperty(r={},"checkbox","change"),_defineProperty(r,"radio","change"),_defineProperty(r,"range","change"),_defineProperty(r,"file","change"),_defineProperty(r,"MISS","input"),r)),O=b((_defineProperty(i={},"SELECT","change"),_defineProperty(i,"TEXTAREA","input"),_defineProperty(i,"BUTTON","click"),_defineProperty(i,"MISS","click"),i)),T={doneSymbol:"*",tokenSeparator:"-",listSeparator:" ",directives:{"function":"data-function",variable:"data-variable",element:"data-element",list:"data-list",inside:"data-inside",template:"data-template"},propertyFromElement:function(e){var t=void 0;return"INPUT"===(t=e.tagName!==undefined?e.tagName:e)?S(e.type):P(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?A(e.type):O(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]},N=function(e){var t=e.getAttribute("is");return t||e.tagName.toLowerCase()},M=function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];e.addEventListener(t,n,r)},I=function(e){return e.content,document.importNode(e.content,!0)},D=function(e){return e.DOM99_C},C=function(e){return e.join(">")},R=function(e){v.push(e)},F=function(){v.pop()},j=function(e,t){return 0===e.length?t:C(e)+">"+t},L=function(e){return e?e+">":e},k=function(e,t){Object.keys(e).forEach(function(n){n.startsWith(t)&&delete e[n]})},x=function(e){k(u,e),k(f,e),k(d,e),k(l,e)},U=function(e,t){e[T.propertyFromElement(e)]=t},X=function(e){e.remove()},w=function(e,t,n){var r=document.createDocumentFragment();if(c.call(e,"DOM99_X")&&c.call(p,e.DOM99_X)){var i=p[e.DOM99_X],a=v.slice();v=t.split(">");var u=L(t),f=n.length,d=void 0,l=void 0;if(c.call(e,"DOM99_R")){if((d=e.DOM99_R.length)>f){var s=void 0;for(s=f;s<d;s+=1)l=""+u+s,e.DOM99_R[s].forEach(X),x(l);e.DOM99_R.length=f}}else e.DOM99_R=[],d=0;n.forEach(function(t,n){if(G(l=""+u+n,t),n>=d){var o=J(i,String(n));e.DOM99_R.push(function(e){var t=e.length,n=[],r=void 0;for(r=0;r<t;r+=1)n.push(e[r]);return n}(o.childNodes)),r.appendChild(o)}}),v=a}else e.innerHTML="",n.forEach(function(t){var n=document.createElement(e.DOM99_I);o(t)?Object.assign(n,t):n[e.DOM99_L]=t,r.appendChild(n)});e.appendChild(r)},G=function te(e,t){if(t===undefined&&(t=e,e=""),o(e),h||ee(e,t),o(t))if(Array.isArray(t))d[e]=t,c.call(f,e)&&function(e,t,n){e.forEach(function(e){w(e,t,n)})}(f[e],e,t);else{var n=L(e);h=!0,Object.entries(t).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],i=t[1];te(""+n+r,i)}),h=!1}else d[e]=t,c.call(u,e)&&(r=u[e],(i=t)!==undefined&&r.forEach(function(e){U(e,i)}));var r,i},K=function(e,t,n){M(e,t,s[n]),e.DOM99_C=C(v)},W=K,B=function(e,t){t.split(T.listSeparator).forEach(function(t){var n=t.split(T.tokenSeparator),r=void 0,i=void 0;if(1===n.length)r=n[0],i=T.eventNameFromElement(e);else{var o=_slicedToArray(n,2);i=o[0],r=o[1]}W(e,i,r)})},H=function(e,t){var n=t.split(T.tokenSeparator),r=_slicedToArray(n,3),i=r[0],o=r[1],a=r[2],u="-";a?(u=o+"-"+a,e.DOM99_X=u):(e.DOM99_L=T.propertyFromElement(o.toUpperCase()),e.DOM99_I=o);var l=j(v,i);g(f,l,e),c.call(d,l)&&w(e,l,d[l])},V=function(e,t){var n=j(v,t);g(u,n,e);var r=d[n];if(r!==undefined&&U(e,r),T.tagNamesForUserInput.includes(e.tagName)){M(e,T.eventNameFromElement(e),function(t){var r=e[T.propertyFromElement(e)];d[n]=r,ee(n,r),u[n].forEach(function(t){t!==e&&U(t,r)})})}},q=function(e,t){var n=t,r=j(v,n);l[r]=e},z=function(e,t){p[t]=e},J=function(e,t){R(t);var n=I(e);return Z(n),$(),F(),n},Q=function(e,t){var n=p[N(e)];if(n){var r=J(n,t);e.appendChild(r)}else e.setAttribute(T.directives.inside,T.doneSymbol+t),R(t),Z(e),F()},Y=function(e){if(e.hasAttribute){var t=Object.values(T.directives);if(Array.prototype.slice.call(e.attributes).forEach(function(e){e.nodeName.startsWith("data")&&t.includes(e.nodeName)}),E.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var o=e.getAttribute(r);o[0]!==T.doneSymbol&&(i(e,o),e.setAttribute(r,""+T.doneSymbol+o))}}),!e.hasAttribute(T.directives.inside)&&!e.hasAttribute(T.directives.list)){var n=N(e);c.call(p,n)&&e.appendChild(I(p[n]))}}},Z=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document.body;return E||(E=[[T.directives.element,q],[T.directives.variable,V],[T.directives["function"],B],[T.directives.list,H],[T.directives.inside,Q],[T.directives.template,z]]),function t(e,n){n(e);for(var r=e.firstChild;r;)1===r.nodeType?(t(r,n),r=r.nextElementSibling):r=r.nextSibling}(e,Y),e},$=function(){var e=C(v);_.forEach(function(t){t(e)})},ee=function(e,t){m.forEach(function(n){n(e,t)})};return e.start=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:document.body,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(Object.assign(s,e),G(t),Z(n),r)return r()},e.activate=Z,e.elements=l,e.functions=s,e.variables=d,e.feed=G,e.forgetContext=x,e.deleteTemplate=function(e){c.call(p,e),p[e].remove(),delete p[e]},e.contextFromArray=C,e.contextFromEvent=function(e){return function t(e,n){var r=n(e);if(r)return r;var i=e.parentNode;return i?t(i,n):void 0}(e.target,D)||""},e.getParentContext=function(e){var t=e.split(">");return t.pop(),t.join(">")},e.plugin=function(e){o(e),"function"===e.type?(y.push(e.plugin),W=function(e,t,n){var r=!1,i=function(){r=!0};y.forEach(function(r){r(e,t,n,s,i)}),r||K(e,t,n)}):"variable"===e.type?m.push(e.plugin):"cloned"===e.type&&_.push(e.plugin)},e.options=T,e.createElement2=function(e){var t=document.createElement(e.tagName);return Object.entries(e).forEach(function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];"tagName"!==r&&t.setAttribute(r,i)}),t},e.idGenerator=function(){var e="id-"+a;return a-=1,e},e}({});