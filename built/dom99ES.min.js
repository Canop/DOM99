const e=e=>{const t=document.createElement(e.tagName);return Object.entries(e).forEach(function([e,n]){"tagName"!==e&&t.setAttribute(e,n)}),t},t=e=>"object"==typeof e&&null!==e,n=function(e,t){const r=t(e);if(r)return r;const o=e.parentNode;return o?n(o,t):void 0},r=(e,t,n)=>{Object.prototype.hasOwnProperty.call(e,t)?e[t].push(n):e[t]=[n]};let o=Number.MAX_SAFE_INTEGER;const a=()=>{const e=`id-${o}`;return o-=1,e},i=Object.prototype.hasOwnProperty,c=e=>t=>i.call(e,t)?e[t]:e.MISS,l=e=>{e.remove()},s=c({INPUT:"value",TEXTAREA:"value",PROGRESS:"value",SELECT:"value",IMG:"src",SOURCE:"src",AUDIO:"src",VIDEO:"src",TRACK:"src",SCRIPT:"src",OPTION:"value",LINK:"href",DETAILS:"open",MISS:"textContent"}),u=c({checkbox:"checked",radio:"checked",MISS:"value"}),d=c({checkbox:"change",radio:"change",range:"change",file:"change",MISS:"input"}),p=c({SELECT:"change",TEXTAREA:"input",BUTTON:"click",MISS:"click"}),f={"function":"data-function",variable:"data-variable",element:"data-element",list:"data-list",inside:"data-inside",template:"data-template"},m=e=>{let t;return"INPUT"===(t=e.tagName!==undefined?e.tagName:e)?u(e.type):s(t)},h=e=>{const t=e.tagName;return"INPUT"===t?d(e.type):p(t)},E=(e,t)=>{t(e);let n=e.firstChild;for(;n;)1===n.nodeType?(E(n,t),n=n.nextElementSibling):n=n.nextSibling},g=e=>{const t=e.getAttribute("is");return t||e.tagName.toLowerCase()},b=(e,t,n,r=!1)=>{e.addEventListener(t,n,r)},S=e=>(e.content,document.importNode(e.content,!0)),v=e=>e.DOM99_C,O=e=>n(e.target,v)||"",y=e=>e.join(">"),A=e=>{const t=e.split(">");return t.pop(),t.join(">")},T=(e,t)=>0===e.length?t:`${y(e)}>${t}`,N=e=>e?`${e}>`:e,I=(e,t)=>{Object.keys(e).forEach(n=>{n.startsWith(t)&&delete e[n]})},M=e=>"defaultValue"in e?e.defaultValue:"open"in e?e.open:e.textContent,C=e=>e.value||M(e),D=(e,t)=>{let n;return n=Array.isArray(e)?y(e):e,t&&(n=`${n}>${t}`),n},{start:$,activate:_,elements:R,functions:j,variables:F,get:k,element:U,feed:x,forgetContext:L,deleteTemplate:P,plugin:X,options:V}=(()=>{const e={},n={},o={},a={},c={},s={};let u=[];const d=[];let p=!1;const v=[],O=[];let y;const A={doneSymbol:"*",tokenSeparator:"-",listSeparator:" ",firstVariableValueStrategy:undefined,directives:f,propertyFromElement:m,eventNameFromElement:h,tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]},M=e=>e.join(">"),C=e=>{u.push(e)},$=function(){u.pop()},_=t=>{I(e,t),I(n,t),I(o,t),I(a,t)},R=(e,t)=>{e[A.propertyFromElement(e)]=t},j=(e,n,r)=>{const o=document.createDocumentFragment();if(i.call(e,"DOM99_X")&&i.call(c,e.DOM99_X)){const t=c[e.DOM99_X],a=(e=>e.slice())(u);u=n.split(">");const s=N(n),d=r.length;let p,f;if(i.call(e,"DOM99_R")){if((p=e.DOM99_R.length)>d){let t;for(t=d;t<p;t+=1)f=`${s}${t}`,e.DOM99_R[t].forEach(l),_(f);e.DOM99_R.length=d}}else e.DOM99_R=[],p=0;r.forEach((n,r)=>{if(F(f=`${s}${r}`,n),r>=p){const n=w(t,String(r));e.DOM99_R.push((e=>{const t=e.length,n=[];let r;for(r=0;r<t;r+=1)n.push(e[r]);return n})(n.childNodes)),o.appendChild(n)}}),u=a}else{e.innerHTML="";const n=e.DOM99_I,a=A.propertyFromElement(n.toUpperCase());r.forEach(e=>{const r=document.createElement(n);t(e)?Object.assign(r,e):r[a]=e,o.appendChild(r)})}e.appendChild(o)},F=(r,a)=>{if(a===undefined&&(a=r,r=""),t(r),p||W(r,a),t(a))if(Array.isArray(a))o[r]=a,i.call(n,r)&&((e,t,n)=>{e.forEach(e=>{j(e,t,n)})})(n[r],r,a);else{const e=N(r);p=!0,Object.entries(a).forEach(([t,n])=>{F(`${e}${t}`,n)}),p=!1}else o[r]=a,i.call(e,r)&&((e,t)=>{t!==undefined&&e.forEach(e=>{R(e,t)})})(e[r],a)},k=(e,t,n)=>{b(e,t,s[n]),e.DOM99_C=M(u)};let U=k;const x=(e,t)=>{t.split(A.listSeparator).forEach(t=>{const n=t.split(A.tokenSeparator);let r,o;1===n.length?(r=n[0],o=A.eventNameFromElement(e)):[o,r]=n,U(e,o,r)})},L=(e,t)=>{const[a,c,l]=t.split(A.tokenSeparator);let s="-";l?(s=`${c}-${l}`,e.DOM99_X=s):e.DOM99_I=c;const d=T(u,a);r(n,d,e),i.call(o,d)&&j(e,d,o[d])},P=(t,n)=>{const a=T(u,n);r(e,a,t),o[a]!==undefined&&R(t,o[a]),A.tagNamesForUserInput.includes(t.tagName)&&b(t,A.eventNameFromElement(t),n=>{const r=t[A.propertyFromElement(t)];o[a]=r,W(a,r),e[a].forEach(e=>{e!==t&&R(e,r)})})},X=(e,t)=>{const n=t,r=T(u,n);a[r]=e},V=(e,t)=>{c[t]=e},w=(e,t)=>{C(t);const n=S(e);return B(n),H(),$(),n},G=(e,t)=>{const n=c[g(e)];if(n){const r=w(n,t);e.appendChild(r)}else e.setAttribute(A.directives.inside,A.doneSymbol+t),C(t),B(e),$()},K=e=>{if(!e.hasAttribute)return;if(y.forEach(([t,n])=>{if(!e.hasAttribute(t))return;const r=e.getAttribute(t);r[0]!==A.doneSymbol&&(n(e,r),e.setAttribute(t,`${A.doneSymbol}${r}`))}),e.hasAttribute(A.directives.inside)||e.hasAttribute(A.directives.list))return;let t=g(e);i.call(c,t)&&e.appendChild(S(c[t]))},B=(e=document.body)=>(y||(y=[[A.directives.element,X],[A.directives.variable,P],[A.directives["function"],x],[A.directives.list,L],[A.directives.inside,G],[A.directives.template,V]]),E(e,K),e),H=function(){const e=M(u);O.forEach(t=>{t(e)})},W=(e,t)=>{v.forEach(n=>{n(e,t)})};return{start:(e={},t={},n=document.body,r=undefined)=>{if(Object.assign(s,e),F(t),B(n),r)return r()},activate:B,elements:a,functions:s,variables:o,get:(e,t)=>o[D(e,t)],element:(e,t)=>a[D(e,t)],feed:F,forgetContext:_,deleteTemplate:e=>{i.call(c,e),c[e].remove(),delete c[e]},plugin:e=>{t(e),"function"===e.type?(d.push(e.plugin),U=((e,t,n)=>{let r=!1;const o=function(){r=!0};d.forEach(r=>{r(e,t,n,s,o)}),r||k(e,t,n)})):"variable"===e.type?v.push(e.plugin):"cloned"===e.type&&O.push(e.plugin)},options:A}})();export{$ as start,_ as activate,R as elements,j as functions,F as variables,k as get,U as element,x as feed,L as forgetContext,P as deleteTemplate,X as plugin,V as options,y as contextFromArray,O as contextFromEvent,A as getParentContext,e as createElement2,a as idGenerator,M as FIRST_VARIABLE_FROM_HTML,C as FIRST_VARIABLE_FROM_USER_AGENT};